<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Build {{.ID}}</title>
		<link rel="stylesheet" href="/static/caronade.min.css" nonce="{{.Nonce}}">
		<link rel="icon" type="image/png" href="/static/favicon-32.png" sizes="32x32">
		<link rel="icon" type="image/png" href="/static/favicon-96.png" sizes="96x96">
	</head>
	<body>

		<nav class="navbar is-light" role="navigation" aria-label="main navigation">
			<div class="navbar-brand">
				<a class="navbar-item">
					<img class="img" src="/static/logo.png" alt="logo" />
				</a>
				<a class="navbar-item">caronade</a>
			</div>
		</nav>

		<section class="section">
			<div class="tile is-anchestor">
				<div class="tile is-vertical">
					<div class="tile">
						<div class="tile is-parent is-vertical">

							<article class="tile is-child message">
								<div class="message-header">{{.Port}}</div>
								<div class="message-body">
									<p>
										<a href="{{(index .PushEvent.Commits .CommitIdx).URL}}">{{(index .PushEvent.Commits .CommitIdx).CommitID}}</a>
										was committed to
										<a href="{{.PushEvent.Repository.HTMLURL}}">{{.PushEvent.Repository.FullName}}</a>
									</p>
									<br />
									<div class="field is-grouped is-grouped-multiline">
										<div class="control">
											<div class="tags has-addons">
												<span class="tag is-dark">port</span>
												<a class="tag is-danger" href="https://www.freshports.org/{{.Port}}">{{.Port}}</a>
											</div>
										</div>
										<div class="control">
											<div class="tags has-addons">
												<span class="tag is-dark">build start</span>
												<span class="tag is-info">{{.StartDate}}</span>
											</div>
										</div>
									</div>
								</div>
							</article>

							<article class="tile is-child message">
								<div class="message-body">
									<pre><code>{{(index .PushEvent.Commits .CommitIdx).Message}}</code></pre>
								</div>
							</article>

						</div>
						<div class="tile is-parent is-3">

							<nav class="tile is-child panel">
								<p class="panel-heading">builds</p>
								{{range .Build}}
								<a class="panel-block" href="#log-{{.ID}}"><span class="icon icon-{{.Status}}"></span> &nbsp; {{.Queue}}
									{{if ne .Status "pending"}}({{.Runtime}}){{end}}</a>
								{{end}}
							</nav>

						</div>
					</div>

					{{range .Build}}
						{{if ne .Status "pending"}}
						<div class="tile is-parent">
							<article class="tile is-child message">
								<div class="message-header">
									<p>{{.Queue}}</p>
									<a class="is-right" href="{{.ID}}.log"><span class="icon icon-download"></span></a>
								</div>
								<div class="message-body">
									<pre><code>{{.LogfileContent}}</code></pre>
									<a id="log-{{.ID}}"></a>
								</div>
							</article>
						</div>
						{{end}}
					{{end}}

				</div>
			</div>

		</section>

		<footer class="footer">
			<p>this page was generated by <a href="https://github.com/decke/caronade" target="_blank">caronade</a> at {{.TimeNow}}</p>
		</footer>
	</body>
</html>
